<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="using:TuneShelf.ViewModels"
        x:Class="TuneShelf.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        mc:Ignorable="d"
        d:DesignWidth="1200"
        d:DesignHeight="800"
        Width="1200"
        Height="800"
        Icon="/Assets/avalonia-logo.ico"
        Title="{Binding Title}"
        WindowStartupLocation="CenterScreen">

    <Design.DataContext>
        <vm:MainWindowViewModel />
    </Design.DataContext>

    <Grid RowDefinitions="Auto,*" Margin="0">
        <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ -->
        <Border Grid.Row="0" 
                Background="#2D2D30" 
                Padding="20,15"
                BorderBrush="#3F3F46"
                BorderThickness="0,0,0,1">
            <TextBlock Text="{Binding Title}"
                       FontSize="24"
                       FontWeight="Bold"
                       Foreground="White"
                       VerticalAlignment="Center" />
        </Border>

        <!-- Ð’ÐºÐ»Ð°Ð´ÐºÐ¸ -->
        <TabControl Grid.Row="1" 
                    Classes="tabControl">
            <!-- Ð’ÐºÐ»Ð°Ð´ÐºÐ° Ð¢Ñ€ÐµÐºÐ¸ -->
            <TabItem Header="Ð¢Ñ€ÐµÐºÐ¸" Padding="20,10">
                <Grid RowDefinitions="Auto,Auto,Auto,*" Margin="20">
                    <!-- ÐŸÐ¾Ð¸ÑÐº -->
                    <StackPanel Grid.Row="0" Orientation="Horizontal" Spacing="10">
                        <TextBlock Text="ÐŸÐ¾Ð¸ÑÐº:" 
                                   VerticalAlignment="Center"
                                   FontSize="14"
                                   Foreground="#E0E0E0"
                                   Margin="0,0,10,0" />
                        <TextBox Width="300"
                                 Watermark="ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¸Ð»Ð¸ Ð¶Ð°Ð½Ñ€..."
                                 Text="{Binding SearchQuery, UpdateSourceTrigger=PropertyChanged}"
                                 FontSize="14" />
                    </StackPanel>

                    <!-- Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹ -->
                    <StackPanel Grid.Row="1" Orientation="Horizontal" Spacing="15">
                        <TextBlock Text="Ð–Ð°Ð½Ñ€:" 
                                   VerticalAlignment="Center"
                                   FontSize="14"
                                   Foreground="#E0E0E0"
                                   Margin="0,0,10,0" />
                        <ComboBox Width="180"
                                  ItemsSource="{Binding AvailableGenres}"
                                  SelectedItem="{Binding SelectedGenreFilter}"
                                  FontSize="14" />

                        <TextBlock Text="Ð ÐµÐ¹Ñ‚Ð¸Ð½Ð³:" 
                                   VerticalAlignment="Center"
                                   FontSize="14"
                                   Foreground="#E0E0E0"
                                   Margin="20,0,10,0" />
                        <TextBox Width="80"
                                 Watermark="ÐœÐ¸Ð½"
                                 Text="{Binding MinRating, UpdateSourceTrigger=PropertyChanged}"
                                 FontSize="14" />
                        <TextBlock Text="â€”" 
                                   VerticalAlignment="Center"
                                   Margin="5,0" />
                        <TextBox Width="80"
                                 Watermark="ÐœÐ°ÐºÑ"
                                 Text="{Binding MaxRating, UpdateSourceTrigger=PropertyChanged}"
                                 FontSize="14" />
                        <CheckBox Content="Show only tracks of selected album"
                                  IsChecked="{Binding ShowOnlySelectedAlbumTracks}" />
                    </StackPanel>

                    <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ð¹ -->
                    <StackPanel Grid.Row="2" Orientation="Horizontal" Spacing="10">
                        <Button Content="âž•"
                                Command="{Binding AddTrackCommand}"
                                Padding="15,8"
                                FontSize="14"
                                Cursor="Hand" />
                        <Button Content="âœï¸"
                                Command="{Binding UpdateTrackCommand }"
                                Padding="15,8"
                                FontSize="14"
                                Cursor="Hand" />
                        <Button Content="ðŸ—‘ï¸"
                                Command="{Binding DeleteTrackCommand}"
                                Padding="15,8"
                                FontSize="14"
                                Cursor="Hand" />
                    </StackPanel>

                    <!-- Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° Ñ‚Ñ€ÐµÐºÐ¾Ð² -->
                    <DataGrid Grid.Row="3"
                              ItemsSource="{Binding Tracks}"
                              SelectedItem="{Binding SelectedTrack, Mode=TwoWay}"
                              AutoGenerateColumns="True"
                              IsReadOnly="True"
                              GridLinesVisibility="Horizontal"
                              HeadersVisibility="Column"
                              SelectionMode="Single"
                              CanUserReorderColumns="False"
                              CanUserResizeColumns="True"
                              Background="#1E1E1E"
                              BorderBrush="#3F3F46"
                              BorderThickness="1" />
                </Grid>
            </TabItem>

            <!-- Ð’ÐºÐ»Ð°Ð´ÐºÐ° ÐÐ»ÑŒÐ±Ð¾Ð¼Ñ‹ -->
            <TabItem Header="ÐÐ»ÑŒÐ±Ð¾Ð¼Ñ‹" Padding="20,10">
                <Grid RowDefinitions="Auto,Auto,*" Margin="20">
                    
                    <StackPanel Grid.Row="0" Orientation="Vertical"
                                Margin="12">

                        <StackPanel Orientation="Horizontal"
                                    Spacing="8"
                                    Margin="0,0,0,8">
                            <TextBlock Text="Album search:"
                                       VerticalAlignment="Center" />
                            <TextBox Width="250"
                                     Watermark="Title or year"
                                     Text="{Binding AlbumsVm.AlbumSearchQuery, UpdateSourceTrigger=PropertyChanged}" />
                        </StackPanel>

                        <ListBox ItemsSource="{Binding AlbumsVm.Albums}"
                                 SelectedItem="{Binding AlbumsVm.SelectedAlbum, Mode=TwoWay}">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" Spacing="6">
                                        <TextBlock Text="{Binding Title}" />
                                        <TextBlock Text="(" />
                                        <TextBlock Text="{Binding Year}" />
                                        <TextBlock Text=")" />
                                    </StackPanel>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </StackPanel>
                    
                    <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ð¹ Ð´Ð»Ñ Ð°Ð»ÑŒÐ±Ð¾Ð¼Ð¾Ð² -->
                    <StackPanel Grid.Row="1" Orientation="Horizontal" Spacing="10">
                        <Button Content="âž•"
                                Command="{Binding AlbumsVm.CreateAlbumCommand}"
                                Padding="15,8"
                                FontSize="14"
                                Cursor="Hand" />
                        <Button Content="âœï¸"
                                Command="{Binding AlbumsVm.EditAlbumCommand}"
                                Padding="15,8"
                                FontSize="14"
                                Cursor="Hand" />
                        <Button Content="ðŸ—‘ï¸"
                                Command="{Binding AlbumsVm.DeleteAlbumCommand}"
                                Padding="15,8"
                                FontSize="14"
                                Cursor="Hand" />
                        <Button Content="ðŸ”„"
                                Command="{Binding AlbumsVm.LoadAlbumsCommand}"
                                Padding="15,8"
                                FontSize="14"
                                Cursor="Hand"
                                Margin="20,0,0,0" />
                        <CheckBox Content="Show only albums of selected artist"
                                  IsChecked="{Binding AlbumsVm.ShowOnlySelectedArtistAlbums}" />
                    </StackPanel>

                    <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð°Ð»ÑŒÐ±Ð¾Ð¼Ð¾Ð² -->
                    <DataGrid Grid.Row="2"
                              ItemsSource="{Binding AlbumsVm.Albums}"
                              SelectedItem="{Binding AlbumsVm.SelectedAlbum, Mode=TwoWay}"
                              AutoGenerateColumns="True"
                              IsReadOnly="True"
                              GridLinesVisibility="Horizontal"
                              HeadersVisibility="Column"
                              SelectionMode="Single"
                              CanUserReorderColumns="False"
                              CanUserResizeColumns="True"
                              Background="#1E1E1E"
                              BorderBrush="#3F3F46"
                              BorderThickness="1">
                    </DataGrid>
                </Grid>
            </TabItem>
            
            <TabItem Header="ÐÑ€Ñ‚Ð¸ÑÑ‚Ñ‹" Padding="20,10">
                <Grid RowDefinitions="Auto,Auto,*" Margin="20">

                    <!-- ÐŸÐ¾Ð¸ÑÐº -->
                    <StackPanel Grid.Row="0" Orientation="Horizontal" Spacing="8" Margin="0,0,0,8">
                        <TextBlock Text="ÐŸÐ¾Ð¸ÑÐº:" VerticalAlignment="Center" />
                        <TextBox Width="250"
                                 Watermark="Ð˜Ð¼Ñ Ð°Ñ€Ñ‚Ð¸ÑÑ‚Ð°..."
                                 Text="{Binding ArtistsVm.ArtistSearchQuery, UpdateSourceTrigger=PropertyChanged}" />
                    </StackPanel>

                    <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ -->
                    <StackPanel Grid.Row="1" Orientation="Horizontal" Spacing="10">
                        <Button Content="âž•"
                                Command="{Binding ArtistsVm.CreateArtistCommand}"
                                Padding="15,8" />
                        <Button Content="âœï¸"
                                Command="{Binding ArtistsVm.EditArtistCommand}"
                                Padding="15,8" />
                        <Button Content="ðŸ—‘ï¸"
                                Command="{Binding ArtistsVm.DeleteArtistCommand}"
                                Padding="15,8" />
                        <Button Content="ðŸ”„"
                                Command="{Binding ArtistsVm.LoadArtistsCommand}"
                                Padding="15,8"
                                Margin="20,0,0,0" />
                    </StackPanel>

                    <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð°Ñ€Ñ‚Ð¸ÑÑ‚Ð¾Ð² -->
                    <DataGrid Grid.Row="2"
                              ItemsSource="{Binding ArtistsVm.Artists}"
                              SelectedItem="{Binding ArtistsVm.SelectedArtist, Mode=TwoWay}"
                              AutoGenerateColumns="True"
                              IsReadOnly="True"
                              GridLinesVisibility="Horizontal"
                              HeadersVisibility="Column"
                              SelectionMode="Single" />
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>

    <Window.Styles>
        <Style Selector="TabControl">
            <Setter Property="Background" Value="#1E1E1E" />
        </Style>
        <Style Selector="TabItem">
            <Setter Property="Background" Value="#2D2D30" />
            <Setter Property="Foreground" Value="#E0E0E0" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="FontWeight" Value="SemiBold" />
        </Style>
        <Style Selector="TabItem:selected">
            <Setter Property="Background" Value="#007ACC" />
            <Setter Property="Foreground" Value="White" />
        </Style>
        <Style Selector="TabItem:pointerover">
            <Setter Property="Background" Value="#3F3F46" />
        </Style>
        <Style Selector="Button">
            <Setter Property="Background" Value="#007ACC" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="CornerRadius" Value="4" />
        </Style>
        <Style Selector="Button:pointerover">
            <Setter Property="Background" Value="#005A9E" />
        </Style>
        <Style Selector="Button:disabled">
            <Setter Property="Background" Value="#3F3F46" />
            <Setter Property="Foreground" Value="#808080" />
        </Style>
        <Style Selector="TextBox">
            <Setter Property="Background" Value="#2D2D30" />
            <Setter Property="Foreground" Value="#E0E0E0" />
            <Setter Property="BorderBrush" Value="#3F3F46" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Padding" Value="8,6" />
        </Style>
        <Style Selector="ComboBox">
            <Setter Property="Background" Value="#2D2D30" />
            <Setter Property="Foreground" Value="#E0E0E0" />
            <Setter Property="BorderBrush" Value="#3F3F46" />
            <Setter Property="BorderThickness" Value="1" />
        </Style>
        <Style Selector="DataGrid">
            <Setter Property="Foreground" Value="#E0E0E0" />
        </Style>
        <Style Selector="DataGridColumnHeader">
            <Setter Property="Background" Value="#2D2D30" />
            <Setter Property="Foreground" Value="#E0E0E0" />
            <Setter Property="FontWeight" Value="SemiBold" />
        </Style>
    </Window.Styles>
</Window>
